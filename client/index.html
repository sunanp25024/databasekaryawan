<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
    
    <!-- PWA Meta Tags -->
    <title>SWA DATA</title>
    <meta name="description" content="SWA DATA - Sistem Manajemen Data Karyawan yang mudah dan efisien" />
    <meta name="theme-color" content="#1e3c72" />
    <meta name="msapplication-TileColor" content="#1e3c72" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="SWA DATA" />
    <meta name="format-detection" content="telephone=no" />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/swapro.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/swapro.png" />
    <link rel="apple-touch-icon" href="/swapro.png" />
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="/sw.js" as="script" />
  </head>
  <body>
    <!-- No JavaScript Warning -->
    <noscript>
      <div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;">
        <h2>JavaScript Required</h2>
        <p>Aplikasi ini memerlukan JavaScript untuk berfungsi dengan baik.</p>
        <p>Silakan aktifkan JavaScript di browser Anda.</p>
      </div>
    </noscript>
    
    <!-- Loading Screen -->
    <div id="app-loading" style="
      position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
      background: radial-gradient(ellipse at center, #1e3c72 0%, #2a5298 50%, #0f2027 100%);
      display: flex; align-items: center; justify-content: center; 
      flex-direction: column; color: white; font-family: 'Segoe UI', system-ui, sans-serif; z-index: 9999;
      overflow: hidden;
    ">
      <!-- Animated Background Particles -->
      <div style="position: absolute; width: 100%; height: 100%; overflow: hidden;">
        <div style="position: absolute; width: 4px; height: 4px; background: rgba(255,255,255,0.6); border-radius: 50%; animation: particle1 8s linear infinite;"></div>
        <div style="position: absolute; width: 6px; height: 6px; background: rgba(255,255,255,0.4); border-radius: 50%; animation: particle2 12s linear infinite;"></div>
        <div style="position: absolute; width: 3px; height: 3px; background: rgba(255,255,255,0.8); border-radius: 50%; animation: particle3 10s linear infinite;"></div>
        <div style="position: absolute; width: 5px; height: 5px; background: rgba(255,255,255,0.5); border-radius: 50%; animation: particle4 15s linear infinite;"></div>
      </div>
      
      <!-- Main Content -->
      <div style="position: relative; z-index: 10; text-align: center;">
        <!-- Logo Container with Glow Effect -->
        <div style="
          margin-bottom: 40px; 
          animation: logoGlow 3s ease-in-out infinite alternate;
          position: relative;
        ">
          <div style="
            position: absolute; 
            top: -20px; left: -20px; right: -20px; bottom: -20px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.3) 0%, transparent 70%);
            border-radius: 20px;
            animation: pulseGlow 2s ease-in-out infinite;
          "></div>
          <img src="/swapro.png" alt="SWA DATA" style="
            width: 180px; 
            height: auto; 
            filter: drop-shadow(0 15px 35px rgba(0,0,0,0.4)) brightness(1.1);
            position: relative;
            z-index: 2;
          " />
        </div>
        
        <!-- Modern Loading Animation -->
        <div style="margin-bottom: 30px; position: relative;">
          <!-- Outer Ring -->
          <div style="
            width: 80px; height: 80px; 
            border: 3px solid rgba(255,255,255,0.1); 
            border-radius: 50%; 
            position: absolute; 
            left: 50%; top: 50%; 
            transform: translate(-50%, -50%);
            animation: rotate 3s linear infinite;
          "></div>
          
          <!-- Progress Ring -->
          <div style="
            width: 80px; height: 80px; 
            border: 3px solid transparent; 
            border-top: 3px solid #3b82f6;
            border-right: 3px solid #1d4ed8;
            border-radius: 50%; 
            position: relative;
            animation: spin 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
          "></div>
          
          <!-- Inner Dot -->
          <div style="
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 12px; height: 12px;
            background: linear-gradient(45deg, #3b82f6, #1d4ed8);
            border-radius: 50%;
            animation: innerPulse 1s ease-in-out infinite;
          "></div>
        </div>
        
        <!-- App Title with Gradient Text -->
        <h1 style="
          margin: 0 0 15px 0; 
          font-weight: 700; 
          font-size: 32px; 
          background: linear-gradient(135deg, #ffffff 0%, #e0e7ff 50%, #c7d2fe 100%);
          -webkit-background-clip: text;
          background-clip: text;
          -webkit-text-fill-color: transparent;
          text-shadow: 0 4px 8px rgba(0,0,0,0.3);
          letter-spacing: 2px;
          animation: titleShine 2s ease-in-out infinite;
        ">SWA DATA</h1>
        
        <!-- Loading Text with Typing Effect -->
        <div style="
          font-size: 16px; 
          opacity: 0.8; 
          margin-bottom: 20px;
          font-weight: 300;
          letter-spacing: 0.5px;
        ">
          <span id="loading-text">Memuat aplikasi</span>
          <span style="animation: blink 1s infinite;">|</span>
        </div>
        
        <!-- Progress Bar -->
        <div style="
          width: 200px; 
          height: 4px; 
          background: rgba(255,255,255,0.2); 
          border-radius: 2px; 
          margin: 0 auto;
          overflow: hidden;
        ">
          <div style="
            width: 100%; 
            height: 100%; 
            background: linear-gradient(90deg, #3b82f6 0%, #1d4ed8 50%, #3b82f6 100%);
            animation: progressMove 2s ease-in-out infinite;
            border-radius: 2px;
          "></div>
        </div>
      </div>
      
      <style>
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        
        @keyframes rotate {
          0% { transform: translate(-50%, -50%) rotate(0deg); }
          100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        @keyframes logoGlow {
          0% { transform: translateY(0px) scale(1); }
          100% { transform: translateY(-8px) scale(1.02); }
        }
        
        @keyframes pulseGlow {
          0% { opacity: 0.5; transform: scale(1); }
          50% { opacity: 0.8; transform: scale(1.05); }
          100% { opacity: 0.5; transform: scale(1); }
        }
        
        @keyframes innerPulse {
          0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
          50% { transform: translate(-50%, -50%) scale(1.3); opacity: 0.7; }
          100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        
        @keyframes titleShine {
          0% { filter: brightness(1); }
          50% { filter: brightness(1.2); }
          100% { filter: brightness(1); }
        }
        
        @keyframes typewriter {
          0% { width: 0; }
          50% { width: 100%; }
          100% { width: 0; }
        }
        
        @keyframes blink {
          0%, 50% { opacity: 1; }
          51%, 100% { opacity: 0; }
        }
        
        @keyframes progressMove {
          0% { transform: translateX(-100%); }
          50% { transform: translateX(0%); }
          100% { transform: translateX(100%); }
        }
        
        @keyframes particle1 {
          0% { transform: translateY(100vh) translateX(0); opacity: 0; }
          10% { opacity: 1; }
          90% { opacity: 1; }
          100% { transform: translateY(-10vh) translateX(100px); opacity: 0; }
        }
        
        @keyframes particle2 {
          0% { transform: translateY(100vh) translateX(50px); opacity: 0; }
          15% { opacity: 1; }
          85% { opacity: 1; }
          100% { transform: translateY(-10vh) translateX(-30px); opacity: 0; }
        }
        
        @keyframes particle3 {
          0% { transform: translateY(100vh) translateX(-30px); opacity: 0; }
          20% { opacity: 1; }
          80% { opacity: 1; }
          100% { transform: translateY(-10vh) translateX(80px); opacity: 0; }
        }
        
        @keyframes particle4 {
          0% { transform: translateY(100vh) translateX(80px); opacity: 0; }
          25% { opacity: 1; }
          75% { opacity: 1; }
          100% { transform: translateY(-10vh) translateX(-50px); opacity: 0; }
        }
      </style>
      
      <script>
        // Loading text animation
        const loadingTexts = [
          'Memuat aplikasi...',
          'Menyiapkan data...',
          'Menginisialisasi...',
          'Hampir selesai...'
        ];
        let textIndex = 0;
        const loadingTextElement = document.getElementById('loading-text');
        
        function updateLoadingText() {
          if (loadingTextElement) {
            loadingTextElement.textContent = loadingTexts[textIndex];
            textIndex = (textIndex + 1) % loadingTexts.length;
          }
        }
        
        // Update text every 1.5 seconds
        const textInterval = setInterval(updateLoadingText, 1500);
        
        // Add random particles
        function createParticle() {
          const particle = document.createElement('div');
          particle.style.cssText = `
            position: absolute;
            width: ${Math.random() * 4 + 2}px;
            height: ${Math.random() * 4 + 2}px;
            background: rgba(255, 255, 255, ${Math.random() * 0.5 + 0.3});
            border-radius: 50%;
            left: ${Math.random() * 100}%;
            animation: particleFloat ${Math.random() * 10 + 8}s linear infinite;
            pointer-events: none;
          `;
          
          document.querySelector('#app-loading > div').appendChild(particle);
          
          // Remove particle after animation
          setTimeout(() => {
            if (particle.parentNode) {
              particle.parentNode.removeChild(particle);
            }
          }, 18000);
        }
        
        // Create particles periodically
        const particleInterval = setInterval(createParticle, 800);
        
        // Add particle animation styles
        const style = document.createElement('style');
        style.textContent = `
          @keyframes particleFloat {
            0% { 
              transform: translateY(100vh) translateX(0) rotate(0deg); 
              opacity: 0; 
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { 
              transform: translateY(-10vh) translateX(${Math.random() * 200 - 100}px) rotate(360deg); 
              opacity: 0; 
            }
          }
        `;
        document.head.appendChild(style);
        
        // Clean up when app loads
        window.addEventListener('load', () => {
          setTimeout(() => {
            clearInterval(textInterval);
            clearInterval(particleInterval);
          }, 1000);
        });
      </script>
    </div>
    
    <div id="root"></div>
    
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- PWA Registration -->
    <script>
      // Hide loading screen when app loads
      window.addEventListener('load', () => {
        const loading = document.getElementById('app-loading');
        if (loading) {
          setTimeout(() => {
            loading.style.opacity = '0';
            setTimeout(() => loading.remove(), 300);
          }, 500);
        }
      });
      
      // Service Worker Registration
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then(registration => {
              console.log('SW registered: ', registration);
            })
            .catch(registrationError => {
              console.log('SW registration failed: ', registrationError);
            });
        });
      }
    </script>
    
    <!-- This is a replit script which adds a banner on the top of the page when opened in development mode outside the replit environment -->
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
  </body>
</html>